<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Image Viewer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="header">
    <a href="index.html" id="backLink"></a>
    <select id="langSelect" onchange="changeLang(this.value)">
      <option value="zh">ä¸­æ–‡</option>
      <option value="en">English</option>
    </select>
  </div>
  <h1 id="title"></h1>
  <div id="gallery"></div>
  <script>
    // å›½é™…åŒ–æ–‡æœ¬
    const i18n = {
      zh: {
        back: "è¿”å›ä¸»é¡µ",
        loading: "åŠ è½½ä¸­...",
        folder: "ğŸ“ "
      },
      en: {
        back: "Back to Home",
        loading: "Loading...",
        folder: "ğŸ“ "
      }
    };

    // è·å–URLå‚æ•°
    window.urlParams = new URLSearchParams(location.search);
    window.currentFolder = window.urlParams.get("folder");
    let currentLang = window.urlParams.get("lang") || (navigator.language.startsWith('zh') ? 'zh' : 'en');
    document.getElementById('langSelect').value = currentLang;

    // æ›´æ–°é¡µé¢æ–‡æœ¬
    function updateTexts() {
      document.getElementById('backLink').innerText = i18n[currentLang].back;
      document.getElementById('title').innerText = i18n[currentLang].loading;
    }

    // åˆ‡æ¢è¯­è¨€
    function changeLang(lang) {
      currentLang = lang;
      updateTexts();
      loadCharacterInfo();
    }

    // åŠ è½½è§’è‰²ä¿¡æ¯
    function loadCharacterInfo() {
      fetch('character.json')
        .then(r => r.json())
        .then(charData => {
          const charInfo = charData[window.currentFolder];
          if(charInfo) {
            const charName = currentLang === 'zh' ? charInfo['zh-Hans'] : charInfo['en'];
            document.getElementById("title").innerText = i18n[currentLang].folder + charName;
          } else {
            document.getElementById("title").innerText = i18n[currentLang].folder + window.currentFolder;
          }
        })
        .catch(() => {
          document.getElementById("title").innerText = i18n[currentLang].folder + window.currentFolder;
        });
    }

    // åˆå§‹åŒ–
    updateTexts();
    loadCharacterInfo();
  </script>
  <script src="js/render.js"></script>
</body>
</html>
